{"version":3,"sources":["../../src/components/clippy.js"],"names":[],"mappings":"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","file":"clippy.js","sourcesContent":["// thank you Smore for this wonderful script!\n// https://www.smore.com/clippy-js\n\n;(function() {\n\n    window.clippy = {};\n    /******\n     *\n     *\n     * @constructor\n     */\n    clippy.Agent = function (path, data, sounds) {\n        this.path = path;\n\n        this._queue = new clippy.Queue($.proxy(this._onQueueEmpty, this));\n\n        this._el = $('<div class=\"clippy\"></div>').hide();\n\n        $(document.body).append(this._el);\n\n        this._animator = new clippy.Animator(this._el, path, data, sounds);\n\n        this._balloon = new clippy.Balloon(this._el);\n\n        this._setupEvents();\n    };\n\n    clippy.Agent.prototype = {\n\n        /**************************** API ************************************/\n\n        /***\n         *\n         * @param {Number} x\n         * @param {Number} y\n         */\n        gestureAt:function (x, y) {\n            var d = this._getDirection(x, y);\n            var gAnim = 'Gesture' + d;\n            var lookAnim = 'Look' + d;\n\n            var animation = this.hasAnimation(gAnim) ? gAnim : lookAnim;\n            return this.play(animation);\n        },\n\n        /***\n         *\n         * @param {Boolean=} fast\n         *\n         */\n        hide:function (fast, callback) {\n            this._hidden = true;\n            var el = this._el;\n            this.stop();\n            if (fast) {\n                this._el.hide();\n                this.stop();\n                this.pause();\n                if (callback) callback();\n                return;\n            }\n\n            return this._playInternal('Hide', function () {\n                el.hide();\n                this.pause();\n                if (callback) callback();\n            })\n        },\n\n\n        moveTo:function (x, y, duration) {\n            var dir = this._getDirection(x, y);\n            var anim = 'Move' + dir;\n            if (duration === undefined) duration = 1000;\n\n            this._addToQueue(function (complete) {\n                // the simple case\n                if (duration === 0) {\n                    this._el.css({top:y, left:x});\n                    this.reposition();\n                    complete();\n                    return;\n                }\n\n                // no animations\n                if (!this.hasAnimation(anim)) {\n                    this._el.animate({top:y, left:x}, duration, complete);\n                    return;\n                }\n\n                var callback = $.proxy(function (name, state) {\n                    // when exited, complete\n                    if (state === clippy.Animator.States.EXITED) {\n                        complete();\n                    }\n                    // if waiting,\n                    if (state === clippy.Animator.States.WAITING) {\n                        this._el.animate({top:y, left:x}, duration, $.proxy(function () {\n                            // after we're done with the movement, do the exit animation\n                            this._animator.exitAnimation();\n                        }, this));\n                    }\n\n                }, this);\n\n                this._playInternal(anim, callback);\n            }, this);\n        },\n\n        _playInternal:function (animation, callback) {\n\n            // if we're inside an idle animation,\n            if (this._isIdleAnimation() && this._idleDfd && this._idleDfd.state() === 'pending') {\n                this._idleDfd.done($.proxy(function () {\n                    this._playInternal(animation, callback);\n                }, this))\n            }\n\n            this._animator.showAnimation(animation, callback);\n        },\n\n        play:function (animation, timeout, cb) {\n            if (!this.hasAnimation(animation)) return false;\n\n            if (timeout === undefined) timeout = 5000;\n\n\n            this._addToQueue(function (complete) {\n                var completed = false;\n                // handle callback\n                var callback = function (name, state) {\n                    if (state === clippy.Animator.States.EXITED) {\n                        completed = true;\n                        if (cb) cb();\n                        complete();\n                    }\n                };\n\n                // if has timeout, register a timeout function\n                if (timeout) {\n                    window.setTimeout($.proxy(function () {\n                        if (completed) return;\n                        // exit after timeout\n                        this._animator.exitAnimation();\n                    }, this), timeout)\n                }\n\n                this._playInternal(animation, callback);\n            }, this);\n\n            return true;\n        },\n\n        /***\n         *\n         * @param {Boolean=} fast\n         */\n        show:function (fast) {\n\n            this._hidden = false;\n            if (fast) {\n                this._el.show();\n                this.resume();\n                this._onQueueEmpty();\n                return;\n            }\n\n            if (this._el.css('top') === 'auto' || !this._el.css('left') === 'auto') {\n                var left = $(window).width() * 0.8;\n                var top = ($(window).height() + $(document).scrollTop()) * 0.8;\n                this._el.css({top:top, left:left});\n            }\n\n            this.resume();\n            return this.play('Show');\n        },\n\n        /***\n         *\n         * @param {String} text\n         */\n        speak:function (text, hold) {\n            this._addToQueue(function (complete) {\n                this._balloon.speak(complete, text, hold);\n            }, this);\n        },\n\n\n        /***\n         * Close the current balloon\n         */\n        closeBalloon:function () {\n            this._balloon.hide();\n        },\n\n        delay:function (time) {\n            time = time || 250;\n\n            this._addToQueue(function (complete) {\n                this._onQueueEmpty();\n                window.setTimeout(complete, time);\n            });\n        },\n\n        /***\n         * Skips the current animation\n         */\n        stopCurrent:function () {\n            this._animator.exitAnimation();\n            this._balloon.close();\n        },\n\n\n        stop:function () {\n            // clear the queue\n            this._queue.clear();\n            this._animator.exitAnimation();\n            this._balloon.hide();\n        },\n\n        /***\n         *\n         * @param {String} name\n         * @returns {Boolean}\n         */\n        hasAnimation:function (name) {\n            return this._animator.hasAnimation(name);\n        },\n\n        /***\n         * Gets a list of animation names\n         *\n         * @return {Array.<string>}\n         */\n        animations:function () {\n            return this._animator.animations();\n        },\n\n        /***\n         * Play a random animation\n         * @return {jQuery.Deferred}\n         */\n        animate:function () {\n            var animations = this.animations();\n            var anim = animations[Math.floor(Math.random() * animations.length)];\n            // skip idle animations\n            if (anim.indexOf('Idle') === 0) {\n                return this.animate();\n            }\n            return this.play(anim);\n        },\n\n        /**************************** Utils ************************************/\n\n        /***\n         *\n         * @param {Number} x\n         * @param {Number} y\n         * @return {String}\n         * @private\n         */\n        _getDirection:function (x, y) {\n            var offset = this._el.offset();\n            var h = this._el.height();\n            var w = this._el.width();\n\n            var centerX = (offset.left + w / 2);\n            var centerY = (offset.top + h / 2);\n\n\n            var a = centerY - y;\n            var b = centerX - x;\n\n            var r = Math.round((180 * Math.atan2(a, b)) / Math.PI);\n\n            // Left and Right are for the character, not the screen :-/\n            if (-45 <= r && r < 45) return 'Right';\n            if (45 <= r && r < 135) return 'Up';\n            if (135 <= r && r <= 180 || -180 <= r && r < -135) return 'Left';\n            if (-135 <= r && r < -45) return 'Down';\n\n            // sanity check\n            return 'Top';\n        },\n\n        /**************************** Queue and Idle handling ************************************/\n\n        /***\n         * Handle empty queue.\n         * We need to transition the animation to an idle state\n         * @private\n         */\n        _onQueueEmpty:function () {\n            if (this._hidden || this._isIdleAnimation()) return;\n            var idleAnim = this._getIdleAnimation();\n            this._idleDfd = $.Deferred();\n\n            this._animator.showAnimation(idleAnim, $.proxy(this._onIdleComplete, this));\n        },\n\n        _onIdleComplete:function (name, state) {\n            if (state === clippy.Animator.States.EXITED) {\n                this._idleDfd.resolve();\n            }\n        },\n\n\n        /***\n         * Is the current animation is Idle?\n         * @return {Boolean}\n         * @private\n         */\n        _isIdleAnimation:function () {\n            var c = this._animator.currentAnimationName;\n            return c && c.indexOf('Idle') === 0;\n        },\n\n\n        /**\n         * Gets a random Idle animation\n         * @return {String}\n         * @private\n         */\n        _getIdleAnimation:function () {\n            var animations = this.animations();\n            var r = [];\n            for (var i = 0; i < animations.length; i++) {\n                var a = animations[i];\n                if (a.indexOf('Idle') === 0) {\n                    r.push(a);\n                }\n            }\n\n            // pick one\n            var idx = Math.floor(Math.random() * r.length);\n            return r[idx];\n        },\n\n        /**************************** Events ************************************/\n\n        _setupEvents:function () {\n            $(window).on('resize', $.proxy(this.reposition, this));\n\n            this._el.on('mousedown', $.proxy(this._onMouseDown, this));\n\n            this._el.on('dblclick', $.proxy(this._onDoubleClick, this));\n        },\n\n        _onDoubleClick:function () {\n            if (!this.play('ClickedOn')) {\n                this.animate();\n            }\n        },\n\n        reposition:function () {\n            if (!this._el.is(':visible')) return;\n            var o = this._el.offset();\n            var bH = this._el.outerHeight();\n            var bW = this._el.outerWidth();\n\n            var wW = $(window).width();\n            var wH = $(window).height();\n            var sT = $(window).scrollTop();\n            var sL = $(window).scrollLeft();\n\n            var top = o.top - sT;\n            var left = o.left - sL;\n            var m = 5;\n            if (top - m < 0) {\n                top = m;\n            } else if ((top + bH + m) > wH) {\n                top = wH - bH - m;\n            }\n\n            if (left - m < 0) {\n                left = m;\n            } else if (left + bW + m > wW) {\n                left = wW - bW - m;\n            }\n\n            this._el.css({left:left, top:top});\n            // reposition balloon\n            this._balloon.reposition();\n        },\n\n        _onMouseDown:function (e) {\n            e.preventDefault();\n            this._startDrag(e);\n        },\n\n\n        /**************************** Drag ************************************/\n\n        _startDrag:function (e) {\n            // pause animations\n            this.pause();\n            this._balloon.hide(true);\n            this._offset = this._calculateClickOffset(e);\n\n            this._moveHandle = $.proxy(this._dragMove, this);\n            this._upHandle = $.proxy(this._finishDrag, this);\n\n            $(window).on('mousemove', this._moveHandle);\n            $(window).on('mouseup', this._upHandle);\n\n            this._dragUpdateLoop = window.setTimeout($.proxy(this._updateLocation, this), 10);\n        },\n\n        _calculateClickOffset:function (e) {\n            var mouseX = e.pageX;\n            var mouseY = e.pageY;\n            var o = this._el.offset();\n            return {\n                top:mouseY - o.top,\n                left:mouseX - o.left\n            }\n\n        },\n\n        _updateLocation:function () {\n            this._el.css({top:this._targetY, left:this._taregtX});\n            this._dragUpdateLoop = window.setTimeout($.proxy(this._updateLocation, this), 10);\n        },\n\n        _dragMove:function (e) {\n            e.preventDefault();\n            var x = e.clientX - this._offset.left;\n            var y = e.clientY - this._offset.top;\n            this._taregtX = x;\n            this._targetY = y;\n        },\n\n        _finishDrag:function () {\n            window.clearTimeout(this._dragUpdateLoop);\n            // remove handles\n            $(window).off('mousemove', this._moveHandle);\n            $(window).off('mouseup', this._upHandle);\n            // resume animations\n            this._balloon.show();\n            this.reposition();\n            this.resume();\n\n        },\n\n        _addToQueue:function (func, scope) {\n            if (scope) func = $.proxy(func, scope);\n            this._queue.queue(func);\n        },\n\n        /**************************** Pause and Resume ************************************/\n\n        pause:function () {\n            this._animator.pause();\n            this._balloon.pause();\n\n        },\n\n        resume:function () {\n            this._animator.resume();\n            this._balloon.resume();\n        }\n\n    };\n\n    /******\n     *\n     *\n     * @constructor\n     */\n    clippy.Animator = function (el, path, data, sounds) {\n        this._el = el;\n        this._data = data;\n        this._path = path;\n        this._currentFrameIndex = 0;\n        this._currentFrame = undefined;\n        this._exiting = false;\n        this._currentAnimation = undefined;\n        this._endCallback = undefined;\n        this._started = false;\n        this._sounds = {};\n        this.currentAnimationName = undefined;\n        this.preloadSounds(sounds);\n        this._overlays = [this._el];\n        var curr = this._el;\n\n        this._setupElement(this._el);\n        for (var i = 1; i < this._data.overlayCount; i++) {\n            var inner = this._setupElement($('<div></div>'));\n\n            curr.append(inner);\n            this._overlays.push(inner);\n            curr = inner;\n        }\n    };\n\n    clippy.Animator.prototype = {\n        _setupElement:function (el) {\n            var frameSize = this._data.framesize;\n            el.css('display', \"none\");\n            el.css({width:frameSize[0], height:frameSize[1]});\n            el.css('background', \"url('\" + this._path + \"/map.png') no-repeat\");\n\n            return el;\n        },\n\n        animations:function () {\n            var r = [];\n            var d = this._data.animations;\n            for (var n in d) {\n                r.push(n);\n            }\n            return r;\n        },\n\n        preloadSounds:function (sounds) {\n\n            for (var i = 0; i < this._data.sounds.length; i++) {\n                var snd = this._data.sounds[i];\n                var uri = sounds[snd];\n                if (!uri) continue;\n                this._sounds[snd] = new Audio(uri);\n\n            }\n        },\n        hasAnimation:function (name) {\n            return !!this._data.animations[name];\n        },\n\n        exitAnimation:function () {\n            this._exiting = true;\n        },\n\n\n        showAnimation:function (animationName, stateChangeCallback) {\n            this._exiting = false;\n\n            if (!this.hasAnimation(animationName)) {\n                return false;\n            }\n\n            this._currentAnimation = this._data.animations[animationName];\n            this.currentAnimationName = animationName;\n\n\n            if (!this._started) {\n                this._step();\n                this._started = true;\n            }\n\n            this._currentFrameIndex = 0;\n            this._currentFrame = undefined;\n            this._endCallback = stateChangeCallback;\n\n            return true;\n        },\n\n\n        _draw:function () {\n            var images = [];\n            if (this._currentFrame) images = this._currentFrame.images || [];\n\n            for (var i = 0; i < this._overlays.length; i++) {\n                if (i < images.length) {\n                    var xy = images[i];\n                    var bg = -xy[0] + 'px ' + -xy[1] + 'px';\n                    this._overlays[i].css({'background-position':bg, 'display':'block'});\n                }\n                else {\n                    this._overlays[i].css('display', 'none');\n                }\n\n            }\n        },\n\n        _getNextAnimationFrame:function () {\n            if (!this._currentAnimation) return undefined;\n            // No current frame. start animation.\n            if (!this._currentFrame) return 0;\n            var currentFrame = this._currentFrame;\n            var branching = this._currentFrame.branching;\n\n\n            if (this._exiting && currentFrame.exitBranch !== undefined) {\n                return currentFrame.exitBranch;\n            }\n            else if (branching) {\n                var rnd = Math.random() * 100;\n                for (var i = 0; i < branching.branches.length; i++) {\n                    var branch = branching.branches[i];\n                    if (rnd <= branch.weight) {\n                        return branch.frameIndex;\n                    }\n\n                    rnd -= branch.weight;\n                }\n            }\n\n            return this._currentFrameIndex + 1;\n        },\n\n        _playSound:function () {\n            var s = this._currentFrame.sound;\n            if (!s) return;\n            var audio = this._sounds[s];\n            if (audio) audio.play();\n        },\n\n        _atLastFrame:function () {\n            return this._currentFrameIndex >= this._currentAnimation.frames.length - 1;\n        },\n\n        _step:function () {\n            if (!this._currentAnimation) return;\n            var newFrameIndex = Math.min(this._getNextAnimationFrame(), this._currentAnimation.frames.length - 1);\n            var frameChanged = !this._currentFrame || this._currentFrameIndex !== newFrameIndex;\n            this._currentFrameIndex = newFrameIndex;\n\n            // always switch frame data, unless we're at the last frame of an animation with a useExitBranching flag.\n            if (!(this._atLastFrame() && this._currentAnimation.useExitBranching)) {\n                this._currentFrame = this._currentAnimation.frames[this._currentFrameIndex];\n            }\n\n            this._draw();\n            this._playSound();\n\n            this._loop = window.setTimeout($.proxy(this._step, this), this._currentFrame.duration);\n\n\n            // fire events if the frames changed and we reached an end\n            if (this._endCallback && frameChanged && this._atLastFrame()) {\n                if (this._currentAnimation.useExitBranching && !this._exiting) {\n                    this._endCallback(this.currentAnimationName, clippy.Animator.States.WAITING);\n                }\n                else {\n                    this._endCallback(this.currentAnimationName, clippy.Animator.States.EXITED);\n                }\n            }\n        },\n\n        /***\n         * Pause animation execution\n         */\n        pause:function () {\n            window.clearTimeout(this._loop);\n        },\n\n        /***\n         * Resume animation\n         */\n        resume:function () {\n            this._step();\n        }\n    };\n\n    clippy.Animator.States = { WAITING:1, EXITED:0 };\n\n    /******\n     *\n     *\n     * @constructor\n     */\n    clippy.Balloon = function (targetEl) {\n        this._targetEl = targetEl;\n\n        this._hidden = true;\n        this._setup();\n    };\n\n    clippy.Balloon.prototype = {\n\n        WORD_SPEAK_TIME:320,\n        CLOSE_BALLOON_DELAY:2000,\n\n        _setup:function () {\n\n            this._balloon = $('<div class=\"clippy-balloon\"><div class=\"clippy-tip\"></div><div class=\"clippy-content\"></div></div> ').hide();\n            this._content = this._balloon.find('.clippy-content');\n\n            $(document.body).append(this._balloon);\n        },\n\n        reposition:function () {\n            var sides = ['top-left', 'top-right', 'bottom-left', 'bottom-right'];\n\n            for (var i = 0; i < sides.length; i++) {\n                var s = sides[i];\n                this._position(s);\n                if (!this._isOut()) break;\n            }\n        },\n\n        _BALLOON_MARGIN:15,\n\n        /***\n         *\n         * @param side\n         * @private\n         */\n        _position:function (side) {\n            var o = this._targetEl.offset();\n            var h = this._targetEl.height();\n            var w = this._targetEl.width();\n\n            var bH = this._balloon.outerHeight();\n            var bW = this._balloon.outerWidth();\n\n            this._balloon.removeClass('clippy-top-left');\n            this._balloon.removeClass('clippy-top-right');\n            this._balloon.removeClass('clippy-bottom-right');\n            this._balloon.removeClass('clippy-bottom-left');\n\n            var left, top;\n            switch (side) {\n                case 'top-left':\n                    // right side of the balloon next to the right side of the agent\n                    left = o.left + w - bW;\n                    top = o.top - bH - this._BALLOON_MARGIN;\n                    break;\n                case 'top-right':\n                    // left side of the balloon next to the left side of the agent\n                    left = o.left;\n                    top = o.top - bH - this._BALLOON_MARGIN;\n                    break;\n                case 'bottom-right':\n                    // right side of the balloon next to the right side of the agent\n                    left = o.left;\n                    top = o.top + h + this._BALLOON_MARGIN;\n                    break;\n                case 'bottom-left':\n                    // left side of the balloon next to the left side of the agent\n                    left = o.left + w - bW;\n                    top = o.top + h + this._BALLOON_MARGIN;\n                    break;\n            }\n\n            this._balloon.css({top:top, left:left});\n            this._balloon.addClass('clippy-' + side);\n        },\n\n        _isOut:function () {\n            var o = this._balloon.offset();\n            var bH = this._balloon.outerHeight();\n            var bW = this._balloon.outerWidth();\n\n            var wW = $(window).width();\n            var wH = $(window).height();\n            var sT = $(document).scrollTop();\n            var sL = $(document).scrollLeft();\n\n            var top = o.top - sT;\n            var left = o.left - sL;\n            var m = 5;\n            if (top - m < 0 || left - m < 0) return true;\n            if ((top + bH + m) > wH || (left + bW + m) > wW) return true;\n\n            return false;\n        },\n\n        speak:function (complete, text, hold) {\n            this._hidden = false;\n            this.show();\n            var c = this._content;\n            // set height to auto\n            c.height('auto');\n            c.width('auto');\n            // add the text\n            c.text(text);\n            // set height\n            c.height(c.height());\n            c.width(c.width());\n            c.text('');\n            this.reposition();\n\n            this._complete = complete;\n            this._sayWords(text, hold, complete);\n        },\n\n        show:function () {\n            if (this._hidden) return;\n            this._balloon.show();\n        },\n\n        hide:function (fast) {\n            if (fast) {\n                this._balloon.hide();\n                return;\n            }\n\n            this._hiding = window.setTimeout($.proxy(this._finishHideBalloon, this), this.CLOSE_BALLOON_DELAY);\n        },\n\n        _finishHideBalloon:function () {\n            if (this._active) return;\n            this._balloon.hide();\n            this._hidden = true;\n            this._hiding = null;\n        },\n\n        _sayWords:function (text, hold, complete) {\n            this._active = true;\n            this._hold = hold;\n            var words = text.split(/[^\\S-]/);\n            var time = this.WORD_SPEAK_TIME;\n            var el = this._content;\n            var idx = 1;\n\n\n            this._addWord = $.proxy(function () {\n                if (!this._active) return;\n                if (idx > words.length) {\n                    this._active = false;\n                    if (!this._hold) {\n                        complete();\n                        this.hide();\n                    }\n                } else {\n                    el.text(words.slice(0, idx).join(' '));\n                    idx++;\n                    this._loop = window.setTimeout($.proxy(this._addWord, this), time);\n                }\n            }, this);\n\n            this._addWord();\n\n        },\n\n        close:function () {\n            if (this._active) {\n                this._hold = false;\n            } else if (this._hold) {\n                this._complete();\n            }\n        },\n\n        pause:function () {\n            window.clearTimeout(this._loop);\n            if (this._hiding) {\n                window.clearTimeout(this._hiding);\n                this._hiding = null;\n            }\n        },\n\n        resume:function () {\n            if (this._addWord)  this._addWord();\n            this._hiding = window.setTimeout($.proxy(this._finishHideBalloon, this), this.CLOSE_BALLOON_DELAY);\n        }\n\n\n    };\n\n    clippy.BASE_PATH = '//s3.amazonaws.com/clippy.js/Agents/';\n\n    clippy.load = function (name, successCb, failCb) {\n        var path = clippy.BASE_PATH + name;\n\n        var mapDfd = clippy.load._loadMap(path);\n        var agentDfd = clippy.load._loadAgent(name, path);\n        var soundsDfd = clippy.load._loadSounds(name, path);\n\n        var data;\n        agentDfd.done(function (d) {\n            data = d;\n        });\n\n        var sounds;\n\n        soundsDfd.done(function (d) {\n            sounds = d;\n        });\n\n        // wrapper to the success callback\n        var cb = function () {\n            var a = new clippy.Agent(path, data,sounds);\n            successCb(a);\n        };\n\n        $.when(mapDfd, agentDfd, soundsDfd).done(cb).fail(failCb);\n    };\n\n    clippy.load._maps = {};\n    clippy.load._loadMap = function (path) {\n        var dfd = clippy.load._maps[path];\n        if (dfd) return dfd;\n\n        // set dfd if not defined\n        dfd = clippy.load._maps[path] = $.Deferred();\n\n        var src = path + '/map.png';\n        var img = new Image();\n\n        img.onload = dfd.resolve;\n        img.onerror = dfd.reject;\n\n        // start loading the map;\n        img.setAttribute('src', src);\n\n        return dfd.promise();\n    };\n\n    clippy.load._sounds = {};\n\n    clippy.load._loadSounds = function (name, path) {\n        var dfd = clippy.load._sounds[name];\n        if (dfd) return dfd;\n\n        // set dfd if not defined\n        dfd = clippy.load._sounds[name] = $.Deferred();\n\n        var audio = document.createElement('audio');\n        var canPlayMp3 = !!audio.canPlayType && \"\" != audio.canPlayType('audio/mpeg');\n        var canPlayOgg = !!audio.canPlayType && \"\" != audio.canPlayType('audio/ogg; codecs=\"vorbis\"');\n\n        if (!canPlayMp3 && !canPlayOgg) {\n            dfd.resolve({});\n        } else {\n            var src = path + (canPlayMp3 ? '/sounds-mp3.js' : '/sounds-ogg.js');\n            // load\n            clippy.load._loadScript(src);\n        }\n\n        return dfd.promise()\n    };\n\n\n    clippy.load._data = {};\n    clippy.load._loadAgent = function (name, path) {\n        var dfd = clippy.load._data[name];\n        if (dfd) return dfd;\n\n        dfd = clippy.load._getAgentDfd(name);\n\n        var src = path + '/agent.js';\n\n        clippy.load._loadScript(src);\n\n        return dfd.promise();\n    };\n\n    clippy.load._loadScript = function (src) {\n        var script = document.createElement('script');\n        script.setAttribute('src', src);\n        script.setAttribute('async', 'async');\n        script.setAttribute('type', 'text/javascript');\n\n        document.head.appendChild(script);\n    };\n\n    clippy.load._getAgentDfd = function (name) {\n        var dfd = clippy.load._data[name];\n        if (!dfd) {\n            dfd = clippy.load._data[name] = $.Deferred();\n        }\n        return dfd;\n    };\n\n    clippy.ready = function (name, data) {\n        var dfd = clippy.load._getAgentDfd(name);\n        dfd.resolve(data);\n    };\n\n    clippy.soundsReady = function (name, data) {\n        var dfd = clippy.load._sounds[name];\n        if (!dfd) {\n            dfd = clippy.load._sounds[name] = $.Deferred();\n        }\n\n        dfd.resolve(data);\n    };\n\n    /******\n     * Tiny Queue\n     *\n     * @constructor\n     */\n    clippy.Queue = function (onEmptyCallback) {\n        this._queue = [];\n        this._onEmptyCallback = onEmptyCallback;\n    };\n\n    clippy.Queue.prototype = {\n        /***\n         *\n         * @param {function(Function)} func\n         * @returns {jQuery.Deferred}\n         */\n        queue:function (func) {\n            this._queue.push(func);\n\n            if (this._queue.length === 1 && !this._active) {\n                this._progressQueue();\n            }\n        },\n\n        _progressQueue:function () {\n\n            // stop if nothing left in queue\n            if (!this._queue.length) {\n                this._onEmptyCallback();\n                return;\n            }\n\n            var f = this._queue.shift();\n            this._active = true;\n\n            // execute function\n            var completeFunction = $.proxy(this.next, this);\n            f(completeFunction);\n        },\n\n        clear:function () {\n            this._queue = [];\n        },\n\n        next:function () {\n            this._active = false;\n            this._progressQueue();\n        }\n    };\n\n}.call(this));"]}